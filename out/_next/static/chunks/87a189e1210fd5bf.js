(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43531,e=>{"use strict";e.s(["Check",()=>t],43531);let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},25652,e=>{"use strict";e.s(["TrendingUp",()=>t],25652);let t=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},70756,e=>{"use strict";e.s(["Lock",()=>t],70756);let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},63488,e=>{"use strict";e.s(["Mail",()=>t],63488);let t=(0,e.i(75254).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},12426,61911,e=>{"use strict";e.s(["DollarSign",()=>r],12426);var t=e.i(75254);let r=(0,t.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["Users",()=>a],61911);let a=(0,t.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},94e3,87316,e=>{"use strict";e.s(["LoadingState",()=>s],94e3);var t=e.i(43476),r=e.i(31278);e.s(["Calendar",()=>a],87316);let a=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var n=e.i(55711),i=e.i(69074);function o(e){let{size:a="md",className:n=""}=e;return(0,t.jsx)(r.Loader2,{className:"animate-spin ".concat({sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[a]," ").concat(n)})}function s(e){let{message:r,type:s="dashboard",progress:l}=e,c={dashboard:a,scanner:i.Upload,processing:n.Brain}[s];return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center max-w-md mx-auto p-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(c,{className:"w-8 h-8 text-blue-600"})}),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)(o,{size:"lg",className:"text-blue-600 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:r||"Loading..."})]}),void 0!==l&&(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-4",children:(0,t.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(100,Math.max(0,l)),"%")}})}),(0,t.jsxs)("p",{className:"text-gray-600 text-sm",children:["processing"===s&&"This may take a few moments...","scanner"===s&&"Analyzing your data...","dashboard"===s&&"Setting up your dashboard..."]})]})})}},35408,e=>{"use strict";e.s(["TrendingDown",()=>t],35408);let t=(0,e.i(75254).default)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]])},55711,e=>{"use strict";e.s(["Brain",()=>t],55711);let t=(0,e.i(75254).default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]])},31278,e=>{"use strict";e.s(["Loader2",()=>t],31278);let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99749,e=>{"use strict";function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e.s(["_",()=>t])},63209,e=>{"use strict";e.s(["AlertCircle",()=>t],63209);let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},75254,e=>{"use strict";e.s(["default",()=>o],75254);var t=e.i(71645);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)((e,r)=>{let{color:i="currentColor",size:o=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:c="",children:u,iconNode:d,...p}=e;return(0,t.createElement)("svg",{ref:r,...n,width:o,height:o,stroke:i,strokeWidth:l?24*Number(s)/Number(o):s,className:a("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"},...p},[...d.map(e=>{let[r,a]=e;return(0,t.createElement)(r,a)}),...Array.isArray(u)?u:[u]])}),o=(e,n)=>{let o=(0,t.forwardRef)((o,s)=>{let{className:l,...c}=o;return(0,t.createElement)(i,{ref:s,iconNode:n,className:a("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),l),...c})});return o.displayName=r(e),o}},69074,e=>{"use strict";e.s(["Upload",()=>t],69074);let t=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},69638,e=>{"use strict";e.s(["CheckCircle",()=>t],69638);let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},78583,87410,e=>{"use strict";e.s(["FileText",()=>t],78583);let t=(0,e.i(75254).default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["BankStatementParser",()=>w,"default",()=>k],87410);let r=[{pattern:/netflix/i,category:"Entertainment",service:"Netflix"},{pattern:/spotify/i,category:"Music",service:"Spotify"},{pattern:/prime\s*video/i,category:"Video",service:"Prime Video"},{pattern:/amazon\s*prime(?!\s*video)/i,category:"Video",service:"Amazon Prime"},{pattern:/disney/i,category:"Video",service:"Disney+"},{pattern:/youtube.*premium/i,category:"Video",service:"YouTube Premium"},{pattern:/(?:apple(?:\s*\.?\s*com)?\s*\/?\s*bill|itunes|apple\s*services|app\s*store)/i,category:"Software",service:"Apple"},{pattern:/adobe/i,category:"Software",service:"Adobe"},{pattern:/microsoft|office 365/i,category:"Software",service:"Microsoft"},{pattern:/google.*one/i,category:"Cloud Storage",service:"Google One"},{pattern:/dropbox/i,category:"Cloud Storage",service:"Dropbox"},{pattern:/notion/i,category:"Productivity",service:"Notion"},{pattern:/github/i,category:"Software",service:"GitHub"},{pattern:/zoom/i,category:"Software",service:"Zoom"},{pattern:/openai/i,category:"Software",service:"OpenAI"},{pattern:/shopify/i,category:"Software",service:"Shopify"},{pattern:/docker/i,category:"Software",service:"Docker"},{pattern:/virgin.*active/i,category:"Fitness",service:"Virgin Active"},{pattern:/puregym/i,category:"Fitness",service:"PureGym"},{pattern:/\b(three|h3g)\b/i,category:"Telecom",service:"Three"},{pattern:/vodafone/i,category:"Telecom",service:"Vodafone"},{pattern:/\bee\b/i,category:"Telecom",service:"EE"},{pattern:/\bo2\b/i,category:"Telecom",service:"O2"},{pattern:/skillshare/i,category:"Software",service:"Skillshare"},{pattern:/interview\s*query/i,category:"Productivity",service:"Interview Query"},{pattern:/\bihsc\b/i,category:"Other",service:"IHSC Membership"},{pattern:/startup\s*plan/i,category:"Software",service:"Startup Plan"},{pattern:/\b(?:linkedin|linked\s*in|lnkd)\b.*\b(premium|prem|subscription|subs|navigator|recruiter)\b/i,category:"Productivity",service:"LinkedIn Premium"},{pattern:/cursor.*ai/i,category:"Software",service:"Cursor"},{pattern:/overleaf|sharelatex/i,category:"Software",service:"Overleaf"},{pattern:/\bindesign\b/i,category:"Software",service:"InDesign"}];function a(e){return r.some(t=>t.pattern.test(e))}let n=[/apple(\s*\.?\s*com)?\s*\/?\s*bill/i,/apple\s*services|app\s*store/i,/google\s*(one|play|storage)/i,/amazon\s*digital/i,/\b(three|vodafone|o2|ee)\b/i,/paypal/i],i=/(netflix|prime\s*video|amazon\s*prime|spotify|google\s*one|apple|openai|three|virgin\s*active|skillshare|notion|docker|overleaf|cursor|shopify|indesign|adobe|interview\s*query|linkedin\s*premium)/i,o=/,(?=(?:[^"]*"[^"]*")*[^"]*$)/,s=/(amazon\s*prime|prime\s*video|skillshare|linkedin\s*premium|dropbox|adobe|microsoft|github|notion|zoom)/i;function l(e){let t=e.trim();return t.startsWith('"')&&t.endsWith('"')?t.slice(1,-1):t}function c(e){if(null==e)return null;let t=Number(String(e).replace(/[£,\s]/g,"").replace(/\u2212/g,"-"));return Number.isFinite(t)?t:null}function u(e,t,r){return new Date(Date.UTC(e,t-1,r)).toISOString().slice(0,10)}function d(e){let t=e.match(/\b(\d{4})-(\d{2})-(\d{2})\b/);if(t)return u(+t[1],+t[2],+t[3]);let r=e.match(/\b(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})\b/);if(r)return u(r[3].length<=2?+r[3]+2e3:+r[3],+r[2],+r[1]);let a=e.match(/\b(\d{1,2})(?:st|nd|rd|th)?\s+([A-Za-z]{3,})\b/);if(a){let e=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(a[2].slice(0,3).toLowerCase());if(e>=0)return u(new Date().getFullYear(),e+1,+a[1])}return null}function p(e){return(e||"").replace(/\bfaster\s*payments\s*(receipt|received|to|from)\b/gi,"").replace(/^(CARD PAYMENT TO|BILL PAYMENT VIA FASTER PAYMENT TO|DIRECT DEBIT PAYMENT TO)\s*/i,"").replace(/\(VIA (APPLE|GOOGLE) PAY\)/i,"").replace(/\bpaypal(?:\s*\*|\s+payment|\s+ecom|\s+intl)?\s*/gi,"").replace(/\bpp\*\s*/gi,"").replace(/\b(REF|REFERENCE|CARD|POS|CONTACTLESS|ONLINE|ECOM|E-COMMERCE)\b/gi,"").replace(/\b(UK|GB|GBP)\b/gi,"").replace(/\b(LTD|LIMITED|PLC|LLC|INC)\b/gi,"").replace(/[0-9]{2,}/g,"").replace(/[^a-zA-Z\s+]/g," ").replace(/\s+/g," ").trim().split(" ").map(e=>e?e[0].toUpperCase()+e.slice(1).toLowerCase():"").join(" ")||"Unknown Service"}let h=/(subscription|subscrip|premium|membership|plan|renewal|direct\s*debit|mandate\s*no|autor?enew|annual|yearly)/i;function m(e){let t=new Map;for(let r of e){if(r.amount>=0)continue;let e=p(r.description);if(!e||"Unknown Service"===e)continue;let a=r.description.toLowerCase(),i=n.some(e=>e.test(a))?String(Math.round(100*Math.abs(r.amount))):"all",o="".concat(e.toLowerCase(),"__").concat(i);t.has(o)||t.set(o,[]),t.get(o).push(r)}let o=[];for(let[e,n]of t.entries()){var l;let t,c=(null==(l=n[0])?void 0:l.description)||e,u=n.map(e=>e.description).join(" ").toLowerCase(),d=/\bmandate\s*no\b/i.test(u)&&!r.some(e=>e.pattern.test(u))&&(u.match(/\b[A-Z][a-z]{2,}\b/g)||[]).length>=2&&u.length<200;if(d&&n.length<2||/(refund|reversal|chargeback|interest|paid in|credit|deposit)/.test(u))continue;let{name:m,merchant:f,conf:g}=function(e){let t=e.trim();for(let{pattern:e,service:a}of r)if(e.test(t))return{name:a,merchant:t,conf:95};return{name:p(t),merchant:t,conf:60}}(c),y=function(e){for(let{pattern:t,category:a}of r)if(t.test(e))return a;return"Other"}(m),b=n.map(e=>new Date(e.date)).filter(e=>!Number.isNaN(e.getTime())).sort((e,t)=>e-t);if(!b.length)continue;let v=n.map(e=>Math.abs(e.amount)).sort((e,t)=>e-t),w=v[Math.floor(v.length/2)],k=g>=90||/\bmandate\s*no\b/i.test(u)?.12:.06,x=v.every(e=>Math.abs(e-w)<=Math.max(1,w*k)),M=n.length>=2&&x,A=g>=90;if(A&&n.length<2&&w<2)continue;let S=h.test(u),C=w>=500,N=/\b(membership|annual|yearly|12\s*months|per\s*year|subscription|subscrip|plan|renewal)\b/i.test(u),T=/\bmandate\s*no\b/i.test(u),E=S&&!T,L=M||A||E||C&&(N||A);if(d&&!A&&!M&&w<500||!L)continue;let j=Number(Math.abs(M?function(e){let t=e.map(e=>Math.abs(e)).filter(e=>e>0);if(!t.length)return 0;let r=t.sort((e,t)=>e-t),a=Math.floor(r.length/2);return r.length%2?r[a]:(r[a-1]+r[a])/2}(n.map(e=>e.amount)):Math.abs(n[0].amount)).toFixed(2));if(j<=0)continue;let O="unknown";M?O=function(e){if(e.length<2)return"unknown";let t=[];for(let r=1;r<e.length;r++)t.push(Math.abs((e[r]-e[r-1])/864e5));let r=t.sort((e,t)=>e-t)[Math.floor(t.length/2)];return r>=6&&r<=8?"weekly":r>=26&&r<=35?"monthly":r>=360&&r<=380?"annual":"unknown"}(b):N||1===n.length&&(A||a(c))&&s.test(m)&&j>=60?O="annual":(A||a(c))&&i.test(m)&&(O="monthly");let P=5*!!/\b(direct\s*debit|mandate\s*no)\b/i.test(u),D=b[b.length-1],I=b[0];if("monthly"===O){let e=new Date(D);e.setMonth(e.getMonth()+1),t=e.toISOString().slice(0,10)}else if("weekly"===O){let e=new Date(D);e.setDate(e.getDate()+7),t=e.toISOString().slice(0,10)}else if("annual"===O){let e=new Date(D);e.setFullYear(e.getFullYear()+1),t=e.toISOString().slice(0,10)}o.push({name:m,merchant:f,serviceName:m,category:y,cost:j,frequency:O,billingDate:D.getDate(),dayOfMonth:D.getDate(),confidence:Math.min(100,g+5*("unknown"!==O)+P),source:"bank_scan",lastUsed:D.toISOString().slice(0,10),signUpDate:I.toISOString().slice(0,10),...t?{nextBilling:t}:{}})}return o}let f=["important information","compensation","fscs","account name","sort code","statement number","page number","date description money in money out balance","authorised by the prudential regulation authority","financial conduct authority","registered office","gross rate","aer","ear","overdraft","terms and conditions"].map(e=>e.toLowerCase()),g=["refund","reversal","chargeback","interest","paid in","credit","deposit","cashback","faster payments receipt","faster payments received","transfer from","incoming","salary","wages","hmrc","benefit","rebate","receipt"].map(e=>e.toLowerCase()),y=/(balance\s*(carried|brought)\s*forward|opening\s*balance|closing\s*balance|balance\s*[cb]\/f|\bb\/f\b|\bc\/f\b|balance\s+forward|carried\s+forward)/i;function b(e){return/^\d{1,2}(?:st|nd|rd|th)?\s+[A-Za-z]{3}\b/.test(e)||/\b\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}\b/.test(e)}function v(e){let t=Array.from(e.slice(-140).matchAll(/£?\s*\d{1,3}(?:,\d{3})*(?:\.\d{2})?/g)).map(e=>e[0]).map((e,t)=>({value:(e=>{let t=/^\(.*\)$/.test(e),r=Number(e.replace(/[()£,\s]/g,"").replace(/\u2212/g,"-"));return Number.isFinite(r)?Math.abs(t?-r:r):NaN})(e),hasPound:/£/.test(e),has2dp:/\.\d{2}\b/.test(e),i:t})).filter(e=>Number.isFinite(e.value)&&e.value>0&&e.value<=2e5);if(!t.length)return 0;let r=t.filter(e=>e.hasPound||e.has2dp);if(!r.length)return 0;(t=r).some(e=>e.value>=5)&&(t=t.filter(e=>e.value>=5));let a=t.map(e=>e.value);if(t.length>=3){let[e,r,a]=t.slice(-3).map(e=>e.value);if(a>=Math.max(e,r))return r}if(a.length>=2){let[e,t]=a.slice(-2);return t>1.5*e?e:Math.min(e,t)}return a[0]}class w{static parseTransactions(e){return m(e)}static parseStatementText(e){let t=m(!function(e){let t=(e.split(/\r?\n/)[0]||"").toLowerCase();return t.includes(",")&&/date|description|amount|merchant|details/.test(t)}(e)?function(e){let t=[];for(let r of e.split(/\r?\n/).filter(Boolean)){let e=r.toLowerCase(),n=a(r);if(!n&&y.test(e)||!n&&g.some(t=>e.includes(t)))continue;let i=d(r);if(!i)continue;let o=v(r);if(!o)continue;let{currency:s,amount:l,rate:c}=function(e){let t=e.match(/[, ](\d+(?:\.\d{2})?)\s*(USD|EUR|AUD|CAD)\b.*?(?:FX\s*RATE|RATE)[:\s]*([\d.]+)\s*\/?\s*GBP/i);return t?{currency:t[2],amount:Number(t[1]),rate:Number(t[3])}:{currency:"GBP"}}(r),u=-Math.abs("GBP"!==s&&l?"GBP"!==s&&c?l*c:l:o),p=r.replace(/\b(\d{4}-\d{2}-\d{2}|\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}|\d{1,2}(?:st|nd|rd|th)?\s+[A-Za-z]{3,}(?:\s+\d{2,4})?)\b/,"").replace(/(\(?[-–−]?\s*£?\s*\d{1,3}(?:,\d{3})*(?:\.\d{2})?\)?)(?:\s*\d{1,3}(?:,\d{3})*(?:\.\d{2})?)?\s*$/,"").trim()||"Unknown Service";t.push({date:i,description:p,amount:u,currency:s,exchangeRate:c})}return t}(e):function(e){let t=e.split(/\r?\n/).filter(Boolean);if(!t.length)return[];let r=t[0].split(o).map(l),a={date:-1,desc:-1,amount:-1,inAmt:-1,outAmt:-1,curr:-1,rate:-1};r.forEach((e,t)=>{let r=e.toLowerCase().trim();/(^| )date( |$)|transaction date|posted date/.test(r)&&(a.date=t),/description|details|merchant|narrative|transaction description|name/.test(r)&&(a.desc=t),/amount(?!.*(in|out))/.test(r)&&(a.amount=t),/money in|credit amount|paid in|deposit/.test(r)&&(a.inAmt=t),/money out|debit amount|paid out|withdrawal/.test(r)&&(a.outAmt=t),/currency/.test(r)&&(a.curr=t),/rate|exchange/.test(r)&&(a.rate=t)});let n=[];for(let e of t.slice(1)){let t=e.split(o).map(l),r=a.date>=0?t[a.date]:void 0,i=a.desc>=0?t[a.desc]:void 0,s=null;a.amount>=0?s=c(t[a.amount]||""):(a.inAmt>=0||a.outAmt>=0)&&(s=((a.inAmt>=0?c(t[a.inAmt]||"0"):0)||0)-((a.outAmt>=0?c(t[a.outAmt]||"0"):0)||0));let u=r&&d(r)||null;if(!u||!i||!Number.isFinite(s))continue;let p=a.curr>=0&&t[a.curr]||"GBP",h=a.rate>=0&&c(t[a.rate]||"")||void 0;n.push({date:u,description:i,amount:s,currency:p,exchangeRate:h})}return n}(e));if(t.length<3){let r=m(function(e){let t=e.split(/\r?\n/).map(e=>e.trim()).filter(Boolean).filter(e=>!/^--- Page \d+ ---$/i.test(e)).filter(e=>{let t=e.toLowerCase();if(f.some(e=>t.includes(e)))return!1;let r=(t.match(/\d/g)||[]).length;return!(t.length>180&&r<6)}),r=[],n="";for(let e=0;e<t.length;e++){let a=t[e],i=t[e+1]||"";if(b(a)){n&&(r.push(n.trim()),n=""),n=a,i&&!b(i)&&(n+=" "+i,e++);continue}n&&(n+=" "+a,/\d{1,3}(?:,\d{3})*(?:\.\d{2})$/.test(a)&&(r.push(n.trim()),n=""))}n&&r.push(n.trim());let i=[];for(let e of r){let t=e.toLowerCase(),r=a(e);if(!r&&y.test(t)||!r&&g.some(e=>t.includes(e)))continue;let n=function(e){let t=e.match(/\b(\d{4})-(\d{2})-(\d{2})\b/);if(t)return u(+t[1],+t[2],+t[3]);if(t=e.match(/\b(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})\b/))return u(t[3].length<=2?+t[3]+2e3:+t[3],+t[2],+t[1]);if(t=e.match(/\b(\d{1,2})(?:st|nd|rd|th)?\s+([A-Za-z]{3,})(?:\s+(\d{2,4}))?\b/)){let e=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(t[2].slice(0,3).toLowerCase());if(e>=0)return u(t[3]?t[3].length<=2?+t[3]+2e3:+t[3]:new Date().getFullYear(),e+1,+t[1])}return null}(e),o=v(e);if(!n||!o)continue;let s=e.replace(/\b(20\d{2}|\d{2}[\/\-]\d{2}[\/\-]\d{2,4}|\d{1,2}(?:st|nd|rd|th)?\s+[A-Za-z]{3,}(?:\s+\d{2,4})?)\b/,"").replace(/(\(?[-–−]?\s*£?\s*\d{1,3}(?:,\d{3})*(?:\.\d{2})?\)?)(?:\s*\d{1,3}(?:,\d{3})*(?:\.\d{2})?)?\s*$/,"").trim()||"Unknown Service";i.push({date:n,description:s,amount:-o})}return i}(e)),n=e=>"".concat(e.name.toLowerCase(),"_").concat(Math.round(100*e.cost),"_").concat(e.frequency),i=new Map;for(let e of[...t,...r])i.set(n(e),e);t=[...i.values()]}return t}}let k=w},9375,e=>{"use strict";e.s(["useAuthState",()=>o]),e.i(51718);var t=e.i(18357),r=e.i(71645),a=function(){return(a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},n=function(e){return{loading:null==e,value:e}},i=function(e){var t=e?e():void 0,i=(0,r.useReducer)(function(e,t){switch(t.type){case"error":return a(a({},e),{error:t.error,loading:!1,value:void 0});case"reset":return n(t.defaultValue);case"value":return a(a({},e),{error:void 0,loading:!1,value:t.value});default:return e}},n(t)),o=i[0],s=i[1],l=(0,r.useCallback)(function(){s({type:"reset",defaultValue:e?e():void 0})},[e]),c=(0,r.useCallback)(function(e){s({type:"error",error:e})},[]),u=(0,r.useCallback)(function(e){s({type:"value",value:e})},[]);return(0,r.useMemo)(function(){return{error:o.error,loading:o.loading,reset:l,setError:c,setValue:u,value:o.value}},[o.error,o.loading,l,c,u,o.value])},o=function(e,a){var n=i(function(){return e.currentUser}),o=n.error,s=n.loading,l=n.setError,c=n.setValue,u=n.value;return(0,r.useEffect)(function(){var r=(0,t.onAuthStateChanged)(e,function(e){var t,r,n,i;return t=void 0,r=void 0,n=void 0,i=function(){return function(e,t){var r,a,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){var l=[i,s];if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&l[0]?a.return:l[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,l[1])).done)return n;switch(a=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,a=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){o.label=l[1];break}if(6===l[0]&&o.label<n[1]){o.label=n[1],n=l;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(l);break}n[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],a=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}}(this,function(t){switch(t.label){case 0:if(!(null==a?void 0:a.onUserChanged))return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a.onUserChanged(e)];case 2:return t.sent(),[3,4];case 3:return l(t.sent()),[3,4];case 4:return c(e),[2]}})},new(n||(n=Promise))(function(e,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(t){var r;t.done?e(t.value):((r=t.value)instanceof n?r:new n(function(e){e(r)})).then(o,s)}l((i=i.apply(t,r||[])).next())})},l);return function(){r()}},[e]),[u,s,o]}},30257,e=>{"use strict";e.s(["default",()=>m],30257);var t=e.i(43476),r=e.i(71645),a=e.i(59141),n=e.i(9375);e.i(51718);var i=e.i(18357);e.i(14539);var o=e.i(76510);e.i(36180);var s=e.i(98925);async function l(e){let t="solo:".concat(e),r=(0,s.doc)(a.db,"households",t),n=(0,s.doc)(a.db,"households",t,"members",e);console.log("[ensure] uid:",e,"project:",(0,o.getApp)().options.projectId);try{await (0,s.setDoc)(r,{id:t,ownerUid:e,name:"Personal household",createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()},{merge:!0}),console.log("[ensure] household OK")}catch(e){throw console.error("[ensure] household WRITE denied",e),e}try{await (0,s.setDoc)(n,{uid:e,householdId:t,role:"owner",createdAt:(0,s.serverTimestamp)(),updatedAt:(0,s.serverTimestamp)()},{merge:!0}),console.log("[ensure] member OK")}catch(e){throw console.error("[ensure] member WRITE denied",e),e}return t}var c=e.i(48819),u=e.i(55794),d=e.i(33819),p=e.i(46417),h=e.i(94e3);function m(){let[e,o]=(0,n.useAuthState)(a.auth),[s,m]=(0,r.useState)(null),[f,g]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{o||e||(0,i.signInAnonymously)(a.auth).catch(console.error)},[o,e]),(0,r.useEffect)(()=>{let t=!1;return(async()=>{if(e)try{let r=await l(e.uid);t||m(r)}catch(e){console.error("ensureSoloHousehold failed",e)}finally{t||g(!1)}})(),()=>{t=!0}},[e]),o||f||!e||!s)?(0,t.jsx)(h.LoadingState,{message:"Setting up your dashboard",type:"dashboard"}):(0,t.jsx)(p.ErrorBoundary,{children:(0,t.jsx)(c.default,{householdId:s,children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(u.default,{}),(0,t.jsx)(d.default,{})]})})})}}]);