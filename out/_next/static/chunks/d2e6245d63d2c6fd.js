(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7805,(e,t,r)=>{var a=function(e){"use strict";var t,r=Object.prototype,a=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},i=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function d(e,r,a,s){var i,o,l,c,d=Object.create((r&&r.prototype instanceof f?r:f).prototype);return n(d,"_invoke",{value:(i=e,o=a,l=new A(s||[]),c=h,function(e,r){if(c===m)throw Error("Generator is already running");if(c===p){if("throw"===e)throw r;return T()}for(l.method=e,l.arg=r;;){var a=l.delegate;if(a){var n=function e(r,a){var n=a.method,s=r.iterator[n];if(t===s)return(a.delegate=null,"throw"===n&&r.iterator.return&&(a.method="return",a.arg=t,e(r,a),"throw"===a.method))?g:("return"!==n&&(a.method="throw",a.arg=TypeError("The iterator does not provide a '"+n+"' method")),g);var i=u(s,r.iterator,a.arg);if("throw"===i.type)return a.method="throw",a.arg=i.arg,a.delegate=null,g;var o=i.arg;return o?o.done?(a[r.resultName]=o.value,a.next=r.nextLoc,"return"!==a.method&&(a.method="next",a.arg=t),a.delegate=null,g):o:(a.method="throw",a.arg=TypeError("iterator result is not an object"),a.delegate=null,g)}(a,l);if(n){if(n===g)continue;return n}}if("next"===l.method)l.sent=l._sent=l.arg;else if("throw"===l.method){if(c===h)throw c=p,l.arg;l.dispatchException(l.arg)}else"return"===l.method&&l.abrupt("return",l.arg);c=m;var s=u(i,o,l);if("normal"===s.type){if(c=l.done?p:"suspendedYield",s.arg===g)continue;return{value:s.arg,done:l.done}}"throw"===s.type&&(c=p,l.method="throw",l.arg=s.arg)}})}),d}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var h="suspendedStart",m="executing",p="completed",g={};function f(){}function x(){}function y(){}var v={};c(v,i,function(){return this});var b=Object.getPrototypeOf,w=b&&b(b(E([])));w&&w!==r&&a.call(w,i)&&(v=w);var j=y.prototype=f.prototype=Object.create(v);function N(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){var r;n(this,"_invoke",{value:function(n,s){function i(){return new t(function(r,i){!function r(n,s,i,o){var l=u(e[n],e,s);if("throw"===l.type)o(l.arg);else{var c=l.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then(function(e){r("next",e,i,o)},function(e){r("throw",e,i,o)}):t.resolve(d).then(function(e){c.value=e,i(c)},function(e){return r("throw",e,i,o)})}}(n,s,r,i)})}return r=r?r.then(i,i):i()}})}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function E(e){if(e){var r=e[i];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function r(){for(;++n<e.length;)if(a.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:T}}function T(){return{value:t,done:!0}}return x.prototype=y,n(j,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:x,configurable:!0}),x.displayName=c(y,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,l,"GeneratorFunction")),e.prototype=Object.create(j),e},e.awrap=function(e){return{__await:e}},N(S.prototype),c(S.prototype,o,function(){return this}),e.AsyncIterator=S,e.async=function(t,r,a,n,s){void 0===s&&(s=Promise);var i=new S(d(t,r,a,n),s);return e.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},N(j),c(j,l,"Generator"),c(j,i,function(){return this}),c(j,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var a in t)r.push(a);return r.reverse(),function e(){for(;r.length;){var a=r.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=E,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(a,n){return o.type="throw",o.arg=e,r.next=a,n&&(r.method="next",r.arg=t),!!n}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);else if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else if(c){if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else throw Error("try statement without catch or finally")}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var s=n;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var i=s?s.completion:{};return(i.type=e,i.arg=t,s)?(this.method="next",this.next=s.finallyLoc,g):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var a=r.completion;if("throw"===a.type){var n=a.arg;k(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(e,r,a){return this.delegate={iterator:E(e),resultName:r,nextLoc:a},"next"===this.method&&(this.arg=t),g}},e}(t.exports);try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},13485,(e,t,r)=>{"use strict";t.exports=(e,t)=>"".concat(e,"-").concat(t,"-").concat(Math.random().toString(16).slice(3,8))},82779,(e,t,r)=>{"use strict";let a=e.r(13485),n=0;t.exports=e=>{let{id:t,action:r,payload:s={}}=e,i=t;return void 0===i&&(i=a("Job",n),n+=1),{id:i,action:r,payload:s}}},37716,(e,t,r)=>{"use strict";var a=e.e;let n=!1;r.logging=!1,r.setLogging=e=>{n=e},r.log=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n?console.log.apply(a,t):null}},61565,(e,t,r)=>{"use strict";let a=e.r(82779),{log:n}=e.r(37716),s=e.r(13485),i=0;t.exports=()=>{let t=s("Scheduler",i),r={},o={},l=[];i+=1;let c=()=>Object.keys(r).length,d=()=>{if(0!==l.length){let e=Object.keys(r);for(let t=0;t<e.length;t+=1)if(void 0===o[e[t]]){l[0](r[e[t]]);break}}};return{addWorker:e=>(r[e.id]=e,n("[".concat(t,"]: Add ").concat(e.id)),n("[".concat(t,"]: Number of workers=").concat(c())),d(),e.id),addJob:async function(r){for(var s=arguments.length,i=Array(s>1?s-1:0),u=1;u<s;u++)i[u-1]=arguments[u];if(0===c())throw Error("[".concat(t,"]: You need to have at least one worker before adding jobs"));return new Promise((s,c)=>{let u=a({action:r,payload:i});l.push(async t=>{l.shift(),o[t.id]=u;try{s(await t[r].apply(e.e,[...i,u.id]))}catch(e){c(e)}finally{delete o[t.id],d()}}),n("[".concat(t,"]: Add ").concat(u.id," to JobQueue")),n("[".concat(t,"]: JobQueue length=").concat(l.length)),d()})},terminate:async()=>{Object.keys(r).forEach(async e=>{await r[e].terminate()}),l=[]},getQueueLen:()=>l.length,getNumWorkers:c}}},75261,(e,t,r)=>{"use strict";var a=e.i(47167);t.exports=e=>{let t={};return("undefined"!=typeof WorkerGlobalScope?t.type="webworker":"object"==typeof document?t.type="browser":"object"==typeof a.default&&(t.type="node"),void 0===e)?t:t[e]}},48824,(e,t,r)=>{"use strict";let a="browser"===e.r(75261)("type")?e=>new URL(e,window.location.href).href:e=>e;t.exports=e=>{let t={...e};return["corePath","workerPath","langPath"].forEach(r=>{e[r]&&(t[r]=a(t[r]))}),t}},89220,(e,t,r)=>{"use strict";t.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},14301,e=>{e.v(JSON.parse('{"name":"tesseract.js","version":"6.0.1","description":"Pure Javascript Multilingual OCR","main":"src/index.js","type":"commonjs","types":"src/index.d.ts","unpkg":"dist/tesseract.min.js","jsdelivr":"dist/tesseract.min.js","scripts":{"start":"node scripts/server.js","build":"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json","prepublishOnly":"npm run build","wait":"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js","test":"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser test:node:all","test:browser":"karma start karma.conf.js","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.mjs","test:node:all":"npm run test:node -- ./tests/*.test.mjs","lint":"eslint src","lint:fix":"eslint --fix src","postinstall":"opencollective-postinstall || true"},"browser":{"./src/worker/node/index.js":"./src/worker/browser/index.js"},"author":"","contributors":["jeromewu"],"license":"Apache-2.0","devDependencies":{"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0","acorn":"^8.8.2","babel-loader":"^9.1.2","buffer":"^6.0.3","cors":"^2.8.5","eslint":"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1","express":"^4.18.2","mocha":"^10.2.0","npm-run-all":"^4.1.5","karma":"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-webpack":"^5.0.0","nyc":"^15.1.0","rimraf":"^5.0.0","rollup":"^3.20.7","wait-on":"^7.0.1","webpack":"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},"dependencies":{"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11","zlibjs":"^0.3.1"},"overrides":{"@rollup/pluginutils":"^5.0.2"},"repository":{"type":"git","url":"https://github.com/naptha/tesseract.js.git"},"bugs":{"url":"https://github.com/naptha/tesseract.js/issues"},"homepage":"https://github.com/naptha/tesseract.js","collective":{"type":"opencollective","url":"https://opencollective.com/tesseractjs"}}'))},4207,(e,t,r)=>{"use strict";t.exports={workerBlobURL:!0,logger:()=>{}}},76423,(e,t,r)=>{"use strict";let a=e.r(14301).version;t.exports={...e.r(4207),workerPath:"https://cdn.jsdelivr.net/npm/tesseract.js@v".concat(a,"/dist/worker.min.js")}},60465,(e,t,r)=>{"use strict";t.exports=e=>{let t,{workerPath:r,workerBlobURL:a}=e;if(Blob&&URL&&a){let e=new Blob(['importScripts("'.concat(r,'");')],{type:"application/javascript"});t=new Worker(URL.createObjectURL(e))}else t=new Worker(r);return t}},46257,(e,t,r)=>{"use strict";t.exports=e=>{e.terminate()}},43660,(e,t,r)=>{"use strict";t.exports=(e,t)=>{e.onmessage=e=>{let{data:r}=e;t(r)}}},54657,(e,t,r)=>{"use strict";t.exports=async(e,t)=>{e.postMessage(t)}},53377,(e,t,r)=>{"use strict";let a=e=>new Promise((t,r)=>{let a=new FileReader;a.onload=()=>{t(a.result)},a.onerror=e=>{let{target:{error:{code:t}}}=e;r(Error("File could not be read! Code=".concat(t)))},a.readAsArrayBuffer(e)}),n=async e=>{let t=e;if(void 0===e)return"undefined";if("string"==typeof e)if(/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e))t=atob(e.split(",")[1]).split("").map(e=>e.charCodeAt(0));else{let r=await fetch(e);t=await r.arrayBuffer()}else if("undefined"!=typeof HTMLElement&&e instanceof HTMLElement)"IMG"===e.tagName&&(t=await n(e.src)),"VIDEO"===e.tagName&&(t=await n(e.poster)),"CANVAS"===e.tagName&&await new Promise(r=>{e.toBlob(async e=>{t=await a(e),r()})});else if("undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas){let r=await e.convertToBlob();t=await a(r)}else(e instanceof File||e instanceof Blob)&&(t=await a(e));return new Uint8Array(t)};t.exports=n},72978,(e,t,r)=>{"use strict";let a=e.r(76423),n=e.r(60465),s=e.r(46257),i=e.r(43660);t.exports={defaultOptions:a,spawnWorker:n,terminateWorker:s,onMessage:i,send:e.r(54657),loadImage:e.r(53377)}},71343,(e,t,r)=>{"use strict";let a=e.r(48824),n=e.r(82779),{log:s}=e.r(37716),i=e.r(13485),o=e.r(89220),{defaultOptions:l,spawnWorker:c,terminateWorker:d,onMessage:u,loadImage:h,send:m}=e.r(72978),p=0;t.exports=async function(){let e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.LSTM_ONLY,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},y=i("Worker",p),{logger:v,errorHandler:b,...w}=a({...l,...f}),j={},N="string"==typeof r?r.split("+"):r,S=g,L=x,k=[o.DEFAULT,o.LSTM_ONLY].includes(g)&&!w.legacyCore,A=new Promise((r,a)=>{t=r,e=a}),E=c(w);E.onerror=t=>{e(t.message)},p+=1;let T=e=>{let{id:t,action:r,payload:a}=e;return new Promise((e,n)=>{s("[".concat(y,"]: Start ").concat(t,", action=").concat(r)),j["".concat(r,"-").concat(t)]={resolve:e,reject:n},m(E,{workerId:y,jobId:t,action:r,payload:a})})},O=(e,t)=>T(n({id:t,action:"loadLanguage",payload:{langs:e,options:{langPath:w.langPath,dataPath:w.dataPath,cachePath:w.cachePath,cacheMethod:w.cacheMethod,gzip:w.gzip,lstmOnly:[o.DEFAULT,o.LSTM_ONLY].includes(S)&&!w.legacyLang}}})),R=(e,t,r,a)=>T(n({id:a,action:"initialize",payload:{langs:e,oem:t,config:r}})),C=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{text:!0},a=arguments.length>3?arguments[3]:void 0;return T(n({id:a,action:"recognize",payload:{image:await h(e),options:t,output:r}}))},_=async(e,t)=>{if(k)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return T(n({id:t,action:"detect",payload:{image:await h(e)}}))},P=async()=>(null!==E&&(d(E),E=null),Promise.resolve());u(E,t=>{let{workerId:r,jobId:a,status:n,action:i,data:o}=t,l="".concat(i,"-").concat(a);if("resolve"===n)s("[".concat(r,"]: Complete ").concat(a)),j[l].resolve({jobId:a,data:o}),delete j[l];else if("reject"===n)if(j[l].reject(o),delete j[l],"load"===i&&e(o),b)b(o);else throw Error(o);else"progress"===n&&v({...o,userJobId:a})});let I={id:y,worker:E,load:()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),writeText:(e,t,r)=>T(n({id:r,action:"FS",payload:{method:"writeFile",args:[e,t]}})),readText:(e,t)=>T(n({id:t,action:"FS",payload:{method:"readFile",args:[e,{encoding:"utf8"}]}})),removeFile:(e,t)=>T(n({id:t,action:"FS",payload:{method:"unlink",args:[e]}})),FS:(e,t,r)=>T(n({id:r,action:"FS",payload:{method:e,args:t}})),reinitialize:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"eng",t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if(k&&[o.TESSERACT_ONLY,o.TESSERACT_LSTM_COMBINED].includes(t))throw Error("Legacy model requested but code missing.");let n=t||S;S=n;let s=r||L;L=s;let i=("string"==typeof e?e.split("+"):e).filter(e=>!N.includes(e));return(N.push(...i),i.length>0)?O(i,a).then(()=>R(e,n,s,a)):R(e,n,s,a)},setParameters:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return T(n({id:t,action:"setParameters",payload:{params:e}}))},recognize:C,detect:_,terminate:P};return T(n({id:void 0,action:"load",payload:{options:{lstmOnly:k,corePath:w.corePath,logging:w.logging}}})).then(()=>O(r)).then(()=>R(r,g,x)).then(()=>t(I)).catch(()=>{}),A}},57130,(e,t,r)=>{"use strict";let a=e.r(71343);t.exports={recognize:async(e,t,r)=>{let n=await a(t,1,r);return n.recognize(e).finally(async()=>{await n.terminate()})},detect:async(e,t)=>{let r=await a("osd",0,t);return r.detect(e).finally(async()=>{await r.terminate()})}}},55793,(e,t,r)=>{"use strict";t.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},54534,(e,t,r)=>{"use strict";t.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},61281,(e,t,r)=>{"use strict";e.r(7805);let a=e.r(61565),n=e.r(71343),s=e.r(57130),i=e.r(55793),o=e.r(89220),l=e.r(54534),{setLogging:c}=e.r(37716);t.exports={languages:i,OEM:o,PSM:l,createScheduler:a,createWorker:n,setLogging:c,...s}},68401,e=>{"use strict";e.s(["default",()=>g],68401);var t=e.i(43476),r=e.i(71645),a=e.i(57951),n=e.i(18566);let s=(0,e.i(75254).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var i=e.i(69074),o=e.i(39312),l=e.i(35408),c=e.i(63209),d=e.i(69638),u=e.i(72520),h=e.i(61281),m=e.i(47513),p=e.i(94e3);function g(){let{user:e,loading:g}=(0,a.useAuth)(),f=(0,n.useRouter)(),[x,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)(null),[N,S]=(0,r.useState)(""),[L,k]=(0,r.useState)(null),[A,E]=(0,r.useState)(null);r.default.useEffect(()=>{g||e||f.push("/login")},[e,g,f]);let T=(0,r.useCallback)(e=>{e.preventDefault(),y(!0)},[]),O=(0,r.useCallback)(e=>{e.preventDefault(),y(!1)},[]),R=(0,r.useCallback)(e=>{e.preventDefault(),y(!1);let t=e.dataTransfer.files;t.length>0&&P(t[0])},[]),C=async e=>{b(!0),E(""),null==I||I();try{S("Extracting text from receipt...");let t=await (0,h.createWorker)("eng"),{data:{text:r}}=await t.recognize(e);await t.terminate(),S("Identifying products and prices...");let a=function(e){let t=e.split("\n").filter(e=>e.trim()),r=[];for(let e of t){let t=e.match(/£?(\d+\.?\d*)/);if(t&&parseFloat(t[1])>1){let a=parseFloat(t[1]),n=e.replace(/£?\d+\.?\d*/,"").trim();n.length>2&&r.push({name:n.replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim().toLowerCase().replace(/\b\w/g,e=>e.toUpperCase()),price:a,quantity:1,category:function(e){let t=e.toLowerCase();return["milk","bread","eggs","butter","cheese"].some(e=>t.includes(e))?"dairy":["apple","banana","orange","fruit"].some(e=>t.includes(e))?"produce":["chicken","beef","fish","meat"].some(e=>t.includes(e))?"meat":"other"}(n)})}}return r.slice(0,20)}(r);if(0===a.length)return void E("Could not detect any items from the receipt. Please try a clearer image.");S("Finding cheaper alternatives...");let n=await Promise.all(a.map(async e=>({...e,alternatives:await _(e.name,e.price)})));S("Calculating savings opportunities...");let s=n.reduce((e,t)=>{var r,a;return e+((null==(a=t.alternatives)||null==(r=a[0])?void 0:r.savings)||0)},0),i={store:function(e){let t=e.toLowerCase();for(let e of["tesco","asda","sainsbury","morrisons","aldi","lidl","waitrose"])if(t.includes(e))return e.charAt(0).toUpperCase()+e.slice(1);return null}(r)||"Unknown Store",date:function(e){for(let t of[/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})/,/(\d{1,2})\s+(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\s+(\d{2,4})/i,/(\d{2,4})[\/\-](\d{1,2})[\/\-](\d{1,2})/]){let r=e.match(t);if(r)try{let e,a,n;t.source.includes("jan|feb")?([,e,a,n]=r,a=(["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(a.toLowerCase())+1).toString()):([,e,a,n]=r,4===e.length&&([n,a,e]=[e,a,n]));let s=2===n.length?"20".concat(n):n,i=parseInt(a),o=parseInt(e),l=parseInt(s);if(i<1||i>12||o<1||o>31||l<1900||l>2030)continue;let c=new Date("".concat(s,"-").concat(a.padStart(2,"0"),"-").concat(e.padStart(2,"0")));if(isNaN(c.getTime()))continue;return c.toISOString().split("T")[0]}catch(e){continue}}return null}(r)||new Date().toISOString().split("T")[0],totalSpent:a.reduce((e,t)=>e+t.price,0),totalSavings:s,items:n,recommendations:function(e){let t=[],r=e.reduce((e,t)=>{var r,a;return e+((null==(a=t.alternatives)||null==(r=a[0])?void 0:r.savings)||0)},0);return r>5&&t.push("Switch stores to save £".concat(r.toFixed(2)," on this shop")),e.filter(e=>e.price>10).length>0&&t.push("Consider own-brand alternatives for expensive items"),t.push("Use store loyalty apps for additional discounts"),t.push("Shop during promotional periods for maximum savings"),t}(n)};k(i)}catch(e){console.error("OCR processing error:",e),E("Failed to process receipt. Please try again with a clearer image.")}finally{b(!1)}};async function _(e,t){let r=[];return["ASDA","Sainsbury's","Morrisons","Tesco"].forEach(a=>{let n=t*(.7+.4*Math.random()),s=Math.max(0,t-n);s>.1&&r.push({name:e,price:parseFloat(n.toFixed(2)),store:a,savings:parseFloat(s.toFixed(2))})}),r.sort((e,t)=>t.savings-e.savings).slice(0,3)}let P=async t=>{E(null);let r=m.ValidationUtils.validateFileUpload(t,5242880);return r.valid?m.ValidationUtils.checkRateLimit("receipt_".concat(null==e?void 0:e.uid),3,6e4)?void(j(t),await C(new Blob([t],{type:t.type}))):void E("Please wait before uploading another receipt"):void E(r.error)},I=()=>{console.log("Camera stopped")},U=async t=>{e&&console.log("Saving recurring item:",t)};return g?(0,t.jsx)(p.LoadingState,{message:"Loading receipt scanner",type:"scanner"}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[(0,t.jsx)("header",{className:"bg-white shadow",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Receipt Scanner"}),(0,t.jsx)("button",{onClick:()=>f.push("/dashboard"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"← Back to Dashboard"})]})})}),(0,t.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[!w&&!L&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(s,{className:"w-8 h-8 text-green-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"AI Receipt Analysis"}),(0,t.jsx)("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Upload a photo of your receipt and our AI will find cheaper alternatives across UK supermarkets. Save money on your regular shopping by discovering better deals."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)(s,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),(0,t.jsx)("h3",{className:"font-semibold text-sm mb-1",children:"OCR Technology"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Advanced text recognition from receipt photos"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)(o.Zap,{className:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),(0,t.jsx)("h3",{className:"font-semibold text-sm mb-1",children:"Price Comparison"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Real-time prices across major UK retailers"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)(l.TrendingDown,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),(0,t.jsx)("h3",{className:"font-semibold text-sm mb-1",children:"Smart Savings"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Personalized money-saving recommendations"})]})]}),(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-12 text-center transition-colors ".concat(x?"border-green-400 bg-green-50":"border-gray-300 hover:border-gray-400"),onDragOver:T,onDragLeave:O,onDrop:R,children:[(0,t.jsx)(i.Upload,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Drop your receipt photo here"}),(0,t.jsxs)("p",{className:"text-gray-500 mb-4",children:["or ",(0,t.jsx)("button",{onClick:()=>{var e;return null==(e=document.getElementById("receipt-file-input"))?void 0:e.click()},className:"text-green-600 hover:text-green-700 font-medium",children:"click to browse"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"Supports JPEG, PNG, WebP • Max 10MB • All major UK retailers"}),(0,t.jsx)("input",{id:"receipt-file-input",type:"file",accept:"image/jpeg,image/png,image/webp",onChange:e=>{let t=e.target.files;t&&t.length>0&&P(t[0])},className:"hidden"})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"text-center text-sm font-medium text-gray-700 mb-4",children:"Supported Retailers"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:["Tesco","ASDA","Sainsbury's","Morrisons","Iceland","Aldi","Lidl","M&S","Waitrose","Co-op"].map(e=>(0,t.jsx)("div",{className:"text-sm text-gray-600 p-2 bg-gray-50 rounded",children:e},e))})]}),A&&(0,t.jsx)("div",{className:"mt-6 p-4 bg-red-50 border-l-4 border-red-500 rounded",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(c.AlertCircle,{className:"w-5 h-5 text-red-500 mr-2"}),(0,t.jsx)("p",{className:"text-red-700",children:A})]})})]}),v&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(s,{className:"w-8 h-8 text-green-600 animate-pulse"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Processing Your Receipt"}),(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center mb-4",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600 mr-3"}),(0,t.jsx)("span",{className:"text-gray-600",children:N})]}),(0,t.jsx)("div",{className:"bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:v?"75%":"0%"}})})]}),(0,t.jsx)("p",{className:"text-gray-500 mt-4 text-sm",children:"Using AI OCR and price comparison across UK retailers..."})]}),L&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Store"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:L.store}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:L.date})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Total Spent"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["£",L.totalSpent.toFixed(2)]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:[L.items.length," items"]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow border",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Potential Savings"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["£",L.totalSavings.toFixed(2)]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:[Math.round(L.totalSavings/L.totalSpent*100),"% cheaper"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"💡 Smart Shopping Tips"}),(0,t.jsx)("div",{className:"space-y-3",children:L.recommendations.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-start p-3 bg-blue-50 rounded-lg",children:[(0,t.jsx)(d.CheckCircle,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),(0,t.jsx)("p",{className:"text-gray-700 text-sm",children:e})]},r))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow border p-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Item-by-Item Analysis"}),(0,t.jsx)("div",{className:"space-y-6",children:L.items.map((e,r)=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 capitalize",children:[e.category," • Qty: ",e.quantity]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["£",e.price.toFixed(2)]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Current price"})]})]}),e.alternatives&&e.alternatives.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Cheaper Alternatives:"}),(0,t.jsx)("div",{className:"space-y-2",children:e.alternatives.slice(0,2).map((e,r)=>(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.store})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["£",e.price.toFixed(2)]}),(0,t.jsxs)("p",{className:"text-sm text-green-600 font-medium",children:["Save £",e.savings.toFixed(2)]})]})]},r))}),"Household"===e.category&&(0,t.jsxs)("button",{onClick:()=>U(e),className:"mt-3 text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center",children:[(0,t.jsx)(u.ArrowRight,{className:"w-4 h-4 mr-1"}),"Track as recurring purchase"]})]})]},r))})]}),(0,t.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,t.jsxs)("button",{onClick:()=>{j(null),k(null),E(null)},className:"bg-green-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-green-700 transition-colors flex items-center",children:[(0,t.jsx)(s,{className:"w-5 h-5 mr-2"}),"Scan Another Receipt"]}),(0,t.jsx)("button",{onClick:()=>f.push("/dashboard"),className:"bg-gray-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-gray-700 transition-colors",children:"View Dashboard"})]})]})]})]}):null}}]);